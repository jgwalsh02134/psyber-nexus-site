:root {
  --bg:#0b0d12;
  --surface:#0f172a;
  --ink:#e8eefc;
  --muted:#9fb3d9;
  --line:#202632;
  --brand:#1f6feb;
  --accent:#008080;
  --radius:12px;
  --space-1:4px;
  --space-2:8px;
  --space-3:12px;
  --space-4:16px;
  --space-5:24px;
  --space-6:32px;
  --maxw:1100px;

  --header-h: 56px;
  --safe-top: env(safe-area-inset-top, 0px);

  --font-sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", sans-serif;
  --font-mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;

  --step--1: clamp(0.78rem, 0.74rem + 0.2vw, 0.9rem);
  --step-0: clamp(0.9rem, 0.85rem + 0.35vw, 1rem);
  --step-1: clamp(1.05rem, 0.95rem + 0.6vw, 1.25rem);
  --step-2: clamp(1.25rem, 1.1rem + 0.9vw, 1.6rem);
  --step-3: clamp(1.5rem, 1.25rem + 1.4vw, 2rem);
  --step-4: clamp(1.85rem, 1.5rem + 2.2vw, 2.6rem);
}

* { box-sizing: border-box; }
html, body { height: 100%; }
html { background: var(--bg); color-scheme: dark; }
body {
  margin: 0;
  color: var(--ink);
  background: var(--bg);
  font-family: var(--font-sans);
  line-height: 1.6;
  font-size: var(--step-0);
}

a { color: var(--brand); text-decoration: none; }
a:hover, a:focus-visible { text-decoration: underline; }

img { max-width: 100%; height: auto; }

.skip {
  position: absolute; left: -999px; top: auto;
  width: 1px; height: 1px; overflow: hidden;
}
.skip:focus { position: static; width: auto; height: auto; padding: var(--space-2); background: var(--surface); border-radius: var(--radius); }

.wrap { max-width: var(--maxw); margin-inline: auto; padding-inline: var(--space-4); }
.stack > * + * { margin-top: var(--space-4); }
.row { display: flex; gap: var(--space-3); flex-wrap: wrap; align-items: center; }
.grid { display: grid; gap: var(--space-4); grid-template-columns: 1fr; }
@media (min-width: 700px) { .grid { grid-template-columns: repeat(2, 1fr); } }

.header {
  position: sticky; top: 0; z-index: 20;
  background: rgba(15, 23, 42, 0.9);
  backdrop-filter: blur(6px);
  border-bottom: 1px solid var(--line);
}
.header .wrap { display: flex; align-items: center; justify-content: space-between; gap: var(--space-3); }
.brand .logo { color: var(--ink); font-weight: 700; letter-spacing: 0.3px; }
.nav { position: fixed; inset: 0 0 auto 0; top: 56px; background: var(--surface); transform: translateY(-100%); transition: transform .2s ease; border-bottom: 1px solid var(--line); }
.nav-list { list-style: none; margin: 0; padding: var(--space-4); display: grid; gap: var(--space-3); }
.nav a { color: var(--ink); font-weight: 600; }
.nav-toggle { min-width: 44px; min-height: 44px; }
body[data-nav-open="true"] .nav { transform: translateY(0); }
@media (min-width: 900px) {
  .nav { position: static; transform: none; background: transparent; border: 0; top: auto; }
  .nav-list { display: flex; gap: var(--space-4); padding: 0; }
  .nav-toggle { display: none; }
}

/* Nav enhancements */
.nav-list a { display: inline-block; padding: 10px 8px; border-radius: 8px; min-height: 44px; }
.nav a[aria-current="page"] { text-decoration: underline; text-underline-offset: 4px; }
/* Overlay header + mobile nav */
.site-header{position:sticky;top:0;z-index:60;backdrop-filter:blur(6px);border-bottom:1px solid var(--line);background:rgba(0,0,0,.25)}
.navbar{display:flex;align-items:center;gap:16px;min-height:var(--header-h)}
.brand{font-weight:700}
.hamburger{display:inline-flex;align-items:center;justify-content:center;width:40px;height:40px;border:1px solid var(--line);border-radius:10px;background:transparent}
.hamburger span{display:block;width:18px;height:2px;background:var(--ink);margin:3px 0}
.nav-inline{display:none}
@media (min-width:900px){ .hamburger{display:none} .nav-inline{display:flex;gap:16px;margin-left:auto} .nav-inline a{padding:0} }
.nav-overlay{position:fixed;inset:0;z-index:55;background:rgba(0,0,0,.55)}
.nav-panel{position:absolute;left:0;right:0;top:calc(var(--header-h) + var(--safe-top));background:rgba(15,23,42,.96);border-top:1px solid var(--line);max-height:calc(100dvh - var(--header-h) - var(--safe-top));overflow:auto;-webkit-overflow-scrolling:touch;display:flex;flex-direction:column;gap:4px;padding:8px 12px 20px}
.nav-panel a{display:block;padding:14px 8px;border-bottom:1px solid var(--line)}
html.nav-open .nav-overlay{display:block}
[hidden]{display:none !important}
.nav-panel a[aria-current="page"], .nav a[aria-current="page"]{text-decoration:underline}
/* Mobile nav visibility */
#site-nav { display: none; }
body[data-nav-open="true"] #site-nav { display: block; }
#nav-toggle[aria-expanded="true"] + #site-nav { display: block; }

.hero { padding-block: clamp(48px, 10vw, 96px); background: radial-gradient(1200px 600px at 50% -20%, rgba(31,111,235,0.15), transparent), var(--bg); border-bottom: 1px solid var(--line); }
.kicker { color: var(--muted); font-size: var(--step-0); text-transform: uppercase; letter-spacing: 0.08em; }
h1 { font-size: var(--step-4); line-height: 1.1; margin: 0 0 var(--space-4); }
h2 { font-size: var(--step-3); line-height: 1.2; margin: var(--space-6) 0 var(--space-3); }
h3 { font-size: var(--step-2); margin: var(--space-4) 0 var(--space-2); }
.lede { font-size: var(--step-1); color: var(--ink); max-width: 65ch; }

.btn {
  appearance: none; border: 1px solid var(--brand); color: white; background: var(--brand);
  border-radius: calc(var(--radius) - 4px); padding: 10px 16px; font-weight: 600;
}
.btn:hover, .btn:focus-visible { filter: brightness(1.05); }
.btn.ghost { background: transparent; color: var(--ink); border-color: var(--line); }
.btn[disabled] { opacity: .6; cursor: not-allowed; }

.card {
  background: linear-gradient(180deg, rgba(255,255,255,0.02), transparent), var(--surface);
  border: 1px solid var(--line);
  border-radius: var(--radius);
  padding: var(--space-5);
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
}

.features .grid { display: grid; gap: var(--space-4); grid-template-columns: 1fr; }
@media (min-width: 700px) { .features .grid { grid-template-columns: repeat(2, 1fr); } }
.cta-more { margin-top: var(--space-5); }

.console .panel {
  background: #0b1220;
  border: 1px solid var(--line);
  border-radius: var(--radius);
  padding: var(--space-3);
  margin-top: var(--space-4);
}
.output {
  font-family: var(--font-mono);
  font-size: var(--step--1);
  white-space: pre-wrap;
  max-height: 45vh;
  overflow: auto;
}
.spinner {
  width: 18px; height: 18px; border-radius: 50%;
  border: 2px solid rgba(255,255,255,0.25);
  border-top-color: var(--accent);
  display: inline-block;
  animation: spin 0.8s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

.footer { border-top: 1px solid var(--line); margin-top: var(--space-6); padding: var(--space-5) 0; }
.footer nav { display: flex; gap: var(--space-4); flex-wrap: wrap; }

.field label { display: block; margin-bottom: var(--space-1); }
input, textarea {
  width: 100%; color: var(--ink); background: var(--surface);
  border: 1px solid var(--line); border-radius: var(--radius); padding: var(--space-3);
}
input:focus-visible, textarea:focus-visible, .btn:focus-visible, a:focus-visible {
  outline: 2px solid var(--accent);
  outline-offset: 2px;
}

.visually-hidden {
  position: absolute; width: 1px; height: 1px; padding: 0; margin: -1px; overflow: hidden;
  clip: rect(0 0 0 0); white-space: nowrap; border: 0;
}
.sr-only { position:absolute; width:1px; height:1px; padding:0; margin:-1px; overflow:hidden; clip:rect(0 0 0 0); white-space:nowrap; border:0; }
.sr-only-focusable:active, .sr-only-focusable:focus { position: static; width:auto; height:auto; clip:auto; white-space:normal; padding: var(--space-2); background: var(--surface); border-radius: var(--radius); border:1px solid var(--line); z-index:1000; }
.sr-only.sr-only-focusable:focus{ left:12px; top:12px; width:auto; height:auto; padding:.4rem .6rem; border:1px solid var(--line); border-radius:8px; background:var(--surface); z-index:1000; position:absolute; clip:auto; white-space:normal; }
.noscript { padding: var(--space-2); margin: var(--space-3); background: var(--surface); border: 1px solid var(--line); border-radius: var(--radius); }
.muted { color: var(--muted); }

#toast {
  position: fixed; bottom: 20px; left: 50%; transform: translateX(-50%);
  max-width: 90vw; background: var(--surface); color: var(--ink);
  border: 1px solid var(--line); border-radius: var(--radius);
  padding: var(--space-3) var(--space-4); box-shadow: 0 8px 24px rgba(0,0,0,0.35);
  display: none;
}
#toast.show { display: block; }

@media (prefers-reduced-motion: reduce) {
  *, *::before, *::after { animation: none !important; transition: none !important; scroll-behavior: auto !important; }
}

/* Chat page styles */
.chat-shell{display:grid;gap:16px}
@media (min-width:900px){.chat-shell{grid-template-columns:2fr 1fr}}
.chat-panel{border:1px solid var(--line);background:rgba(255,255,255,.02);border-radius:var(--radius,12px);padding:12px;min-height:60vh;display:flex;flex-direction:column}
.chat-header{position:sticky;top:56px;z-index:5;display:flex;align-items:center;gap:8px;padding:6px 0}
.chat-header .grow{flex:1}
.chat-log{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:10px}
.msg{display:grid;gap:6px;padding:10px;border:1px solid var(--line);border-radius:12px;background:rgba(255,255,255,.03);max-width:80ch}
.msg .meta{font-size:.8rem;color:var(--muted)}
.msg .content{white-space:pre-wrap;word-break:break-word}
.msg .text{white-space:pre-wrap;word-break:break-word}
.msg.user{background:rgba(46,202,208,.06);border-color:color-mix(in oklab,var(--accent,#008080),white 60%)}
.msg.assistant{background:rgba(31,111,235,.06);border-color:color-mix(in oklab,var(--brand,#1f6feb),white 60%)}
.icon-btn{display:inline-grid;place-items:center;width:36px;height:36px;border:1px solid var(--line);border-radius:10px;background:transparent;opacity:.9;color:inherit}
.icon-btn:hover,.icon-btn:focus-visible{opacity:1;outline:2px solid var(--brand);outline-offset:2px}
.icon-img{width:18px;height:18px;display:block;pointer-events:none}
.msg-actions-row{display:flex;gap:6px;opacity:0;transition:opacity .15s}
.msg:hover .msg-actions-row,.msg:focus-within .msg-actions-row{opacity:1}
@media (hover:none){.msg-actions-row{opacity:1}}
.chat-form{margin-top:auto;display:grid;gap:8px}
#chat-input{resize:none;overflow:auto;max-height:10lh;min-height:2.4rem;padding:10px;border-radius:12px;border:1px solid var(--line);background:var(--surface,#0f172a);color:var(--ink)}
.chat-actions{display:flex;gap:8px;justify-content:flex-end}
.btn--spin{position:relative;color:transparent}
.btn--spin::after{content:"";position:absolute;inset:0;margin:auto;width:1rem;height:1rem;border:.18rem solid rgba(255,255,255,.3);border-top-color:currentColor;border-radius:50%;animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.to-bottom{position:sticky;bottom:10px;margin-left:auto;z-index:10}
.chat-alert{min-height:1.2rem;color:var(--muted);font-size:.9rem}
.chip-list{display:flex;flex-wrap:wrap;gap:8px;margin:8px 0 0;padding:0;list-style:none}
.chip{border:1px solid var(--line);border-radius:999px;padding:.35rem .7rem;background:transparent;color:var(--ink)}
:focus-visible{outline:2px solid var(--brand,#1f6feb);outline-offset:3px}

/* Sticky footer layout */
body.page{min-height:100dvh;display:flex;flex-direction:column}
main{flex:1 0 auto}
footer{margin-top:auto}
